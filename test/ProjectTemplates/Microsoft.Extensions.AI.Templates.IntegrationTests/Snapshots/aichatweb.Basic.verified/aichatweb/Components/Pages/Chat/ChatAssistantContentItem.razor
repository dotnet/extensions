@if (contentText is not null)
{
    <div class="assistant-message">
        <div>
            <div class="assistant-message-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
                </svg>
            </div>
        </div>
        <div class="assistant-message-header">Assistant</div>
        <div class="assistant-message-text">
            <assistant-message markdown="@contentText"></assistant-message>

            @TextContentFooter
        </div>
    </div>
}
else if (Content is FunctionCallContent { Name: "Search" } fcc && fcc.Arguments?.TryGetValue("searchPhrase", out var searchPhrase) is true)
{
    <div class="assistant-search">
        <div class="assistant-search-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
            </svg>
        </div>
        <div class="assistant-search-content">
            Searching:
            <span class="assistant-search-phrase">@searchPhrase</span>
            @if (fcc.Arguments?.TryGetValue("filenameFilter", out var filenameObj) is true && filenameObj is string filename && !string.IsNullOrEmpty(filename))
            {
                <text> in </text><span class="assistant-search-phrase">@filename</span>
            }
        </div>
    </div>
}

@code {
    private string? contentText;

    [Parameter]
    public AIContent? Content { get; set; }

    [Parameter]
    public string? Text { get; set; }

    [Parameter]
    public RenderFragment? TextContentFooter { get; set; }

    protected override void OnParametersSet()
    {
        contentText = Text ?? (Content is TextContent { Text: { Length: > 0 } text } ? text : null);
    }
}
